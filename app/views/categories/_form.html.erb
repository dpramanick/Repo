<% action = @category.persisted? ? category_path(@category) : categories_path %>
<form action="<%= action %>" method="post">
  <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
  <% if @category.persisted? %>
    <input type="hidden" name="_method" value="PUT">
  <% end %>

  <div>
    <label for="name">Name</label>
    <input type="text" name="category[name]" id="name" value="<%= @category.name %>">
  </div>

  <input type="submit" value="Submit">
</form>